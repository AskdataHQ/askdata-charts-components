<!--
    EXAMPLE DOWNLOADED FROM https://github.com/AskdataHQ/askdata-charts-components/tree/main/widgets/askdata/_widget_example/index.htm
-->
<!DOCTYPE html>
<html style="height: 100%">
    
    <head>

    <!-- BEGINNING OF THE HEADER SNIPPET -->
        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        
        <!-- These imports are required -->
        <script src="/lib/scripts/utils.js"></script>
        <script src="/lib/scripts/env.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>

        <!-- You can leave this library import if you use eCharts library otherwise you can remove it -->
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
        
        <!-- You can leave this library import if you use JQuery. Beware that tThis example uses JQuery -->
        <script src="/lib/scripts/jquery.min.js"></script>

        <!-- You can leave this library import if you use Mustache library otherwise you can remove it -->
        <script src="https://unpkg.com/mustache@latest"></script>

        <!-- Default styling -->
        <link href="/lib/styles/css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" type="text/css" href="/lib/styles/style.css">
        
        <!-- Other JS libraries or CSS import-->
        <!-- Put your libaries here --->
    
    <!-- END OF THE HEADER SNIPPET -->
    </head>

    <body style="height: 100%; margin: 0">
        <div id="container" style="height: 100%"></div>
</body>

<!-- BEGINNING OF THE DATA LOADER SNIPPET -->
<script type="text/javascript">

// Uncomment to test on localhost after the publish on DEV before the approval in QA and/or PROD
environment_widget = "https://api-dev.askdata.com";
//environment_widget = "https://api.askdata.com"  // prod  da togliere quando porto su...

console.log("I'm going to request data");

$.ajax({

url: environment_widget +"/smartinsight/widgets/" + getUrlParameter('widgetId'),
type: "GET",
async: false,
beforeSend: function(xhr){xhr.setRequestHeader('Authorization', 'Bearer ' + getToken() 
 ).setRequestHeader('Content-Type','application/json')},
success: function(data) { 

    console.log("Requesting data if the WS answers 200");
    /// PUT YOUR CODE THAT RENDER THE WIDGET RESULTS
    console.log(data);

    }

  });
</script>
<!-- END OF THE DATA LOADER SNIPPET -->

</html>