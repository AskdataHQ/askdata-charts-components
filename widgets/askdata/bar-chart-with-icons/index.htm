  
<!DOCTYPE html>
<html style="height: 100%">
    <head>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>

        <!-- Beginning Include Header -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
<script src="/lib/scripts/utils.js"></script>
<script src="/lib/scripts/env.js"></script>
<script src="/lib/scripts/jquery.min.js"></script>
<link href="/lib/styles/css" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/lib/styles/style.css">
<script src="https://unpkg.com/mustache@latest"></script>

<!-- End Include Header -->
    </head>
    <body style="height: 100%; margin: 0">
        <div id="container" style="height: 100%"></div>
    </body>


    <script>

//remove me
environment_widget = "https://api-dev.askdata.com";

// Request charting data
$.ajax({

       url: environment_widget +"/smartinsight/widgets/" + getUrlParameter('widgetId'),
       type: "GET",
       async: false,
       beforeSend: function(xhr){xhr.setRequestHeader('Authorization', 'Bearer ' + getToken() 
        ).setRequestHeader('Content-Type','application/json')},
       success: function(data) { 
        console.log(data)
var dom = document.getElementById("container");
var myChart = echarts.init(dom);
var app = {};

var option;



var weatherIcons = {
    'alfa': 'https://s3.eu-central-1.amazonaws.com/innaas.smartfeed/icons/stellantis/brand_icons/alfa-romeo.png',
    'fiat': 'https://s3.eu-central-1.amazonaws.com/innaas.smartfeed/icons/stellantis/brand_icons/fiat.png',
    'fiatp': 'https://s3.eu-central-1.amazonaws.com/innaas.smartfeed/icons/stellantis/brand_icons/fiat-professional.png',
    'jeep': 'https://s3.eu-central-1.amazonaws.com/innaas.smartfeed/icons/stellantis/brand_icons/jeep.png',
    'lancia': 'https://s3.eu-central-1.amazonaws.com/innaas.smartfeed/icons/stellantis/brand_icons/lancia .png'
};

var seriesLabel = {
    show: true
}

option = {
   
    tooltip: {
        trigger: 'axis',
        axisPointer: {
            type: 'shadow'
        }
    },
    grid: {
        left: 100
    },
    toolbox: {
        show: true,
        feature: {
            saveAsImage: {}
        }
    },
    xAxis: {
        type: 'value',
        name: 'Leads',
        axisLabel: {
            formatter: '{value}'
        }
    },
    yAxis: {
        type: 'category',
        inverse: true,
        data: data.fields.m2_id.data,
        axisLabel: {
            formatter: function (value) {
                return '{' + value + '| }';
            },
            margin: 3,
            rich: {
                value: {
                    align: 'center'
                },
                Alfa_Romeo: {
                    height: 35,
                    align: 'center',
                    backgroundColor: {
                        image: weatherIcons.alfa
                    }
                },
                Fiat_Professional: {
                    height: 35,
                    align: 'center',
                    backgroundColor: {
                        image: weatherIcons.fiatp
                    }
                },
                Speechiness: {
                    height: 35,
                    align: 'center',
                    backgroundColor: {
                        image: weatherIcons.fiatp
                    }
                },
                Lancia: {
                    height: 35,
                    align: 'center',
                    backgroundColor: {
                        image: weatherIcons.lancia
                    }
                },
                Jeep: {
                    height: 35,
                    align: 'center',
                    backgroundColor: {
                        image: weatherIcons.jeep
                    }
                },
                Fiat: {
                    height: 35,
                    align: 'center',
                    backgroundColor: {
                        image: weatherIcons.fiat
                    }
                }
            }
        }
    },
    series: [
        {
            name: 'Lead',
            type: 'bar',
            data: data.fields.m1_id.data,
            label: seriesLabel,
            color: "#243882"
        
        }
    ]
};

if (option && typeof option === 'object') {
    myChart.setOption(option);
}
}
  });

        </script>
</html>
    
