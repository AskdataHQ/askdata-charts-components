<!DOCTYPE html>
<html style="height: 100%">
    <head>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>

        <!-- Beginning Include Header -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
<script src="/lib/scripts/utils.js"></script>
<script src="/lib/scripts/env.js"></script>
<script src="/lib/scripts/jquery.min.js"></script>
<link href="/lib/styles/css" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/lib/styles/style.css">
<script src="https://unpkg.com/mustache@latest"></script>

<!-- End Include Header -->
    </head>
    <body style="height: 100%; margin: 0">
        <div id="container" style="height: 100%"></div>
    </body>


    <script>

// Request charting data
$.ajax({

       url: environment_widget +"/smartinsight/widgets/" + getUrlParameter('widgetId'),
       type: "GET",
       async: false,
       beforeSend: function(xhr){xhr.setRequestHeader('Authorization', 'Bearer ' + getToken() 
        ).setRequestHeader('Content-Type','application/json')},
       success: function(data) { 
        console.log(data)

        /*
        var template = document.getElementById('template').innerHTML;
        var rendered = Mustache.render(template, data);
        document.getElementById('target').innerHTML = rendered;
        console.log(rendered)
        */

var dom = document.getElementById("container");
var myChart = echarts.init(dom);
var app = {};

var option;

option = {
    title: {},
    tooltip: {},
    legend: {
        data: ['预算分配（Allocated Budget）', '实际开销（Actual Spending）']
    },
    radar: {
        // shape: 'circle',
        name: {
            textStyle: {
                color: '#fff',
                backgroundColor: '#999',
                borderRadius: 3,
                padding: [3, 5]
            }
        },
        indicator: [
            { name: 'Contrasti vinti',max: 254},
            { name: 'Falli commessi', max:63},
            { name: 'Palle recuperate', max: 273},
            { name: 'Tackle vinti', max: 53},
            { name: 'Passaggi riusciti', max: 1960}
            ]
    },
    series: [{
        name: 'Players',
        type: 'radar',
        // areaStyle: {normal: {}},
        data: [
            {
                value: [141, 52, 211, 22, 1380],
                name: 'Kessié Franck'
            },
            {
                value: [206, 48, 169, 31.0, 1133],
                name: 'Milinkovic-Savic Sergej'
            },{
                value: [42, 11,  48,  7, 313],
                name: 'Media Serie A'
            }
        ]
    }]
};

if (option && typeof option === 'object') {
    myChart.setOption(option);
}

  }
  });

/*
// Redirect to login if not authenticated 
$(document).ajaxError(function( event, jqxhr, settings, exception ) {
    if ( jqxhr.status== 401 ) {
      location.replace(environment_auth+"/login");

    }
});
*/

  </script>
</html>
    